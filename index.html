<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Fisher’s Logic Engine (v1.8.2)</title>
    <link rel="stylesheet" href="src/ui/style.css">
    <script src="src/data/fisherdata.js"></script>
    <script src="src/logic/engine.js"></script>
    <script src="src/logic/csv_handler.js"></script>
    <script src="src/ui/main.js"></script>
</head>
<body>

<div class="container">
    <header>
        <h1>Fisher’s Logic Engine <small style="font-size: 0.5em; color: #888;">v1.8.2</small></h1>
        <div class="tabs">
            <div id="tabSim" class="tab active" onclick="switchView('sim')">シミュレーター</div>
            <div id="tabMgmt" class="tab" onclick="switchView('mgmt')">データ管理窓</div>
        </div>
    </header>

    <div id="simView" class="main-layout">
        <aside class="sidebar">
            <section class="panel">
                <h2>◇環境設定</h2>
                <div class="control-group"><label>釣り場</label><select id="spotSelect" onchange="updateSpotSelections('sim')"></select></div>
                <div class="control-group"><label>天気 / 時間</label><select id="envSelect" onchange="executeSimulation()"></select></div>
                <div class="control-group"><label>釣り餌</label><select id="baitSelect" onchange="executeSimulation()"></select></div>
                <div class="control-group">
                    <label>ハズレ時の挙動</label>
                    <select id="skipSelect" onchange="executeSimulation()">
                        <option value="rest">ハズレをスルー（竿上げ）</option>
                        <option value="hook" selected>全部釣り上げる</option>
                    </select>
                </div>
                <div class="control-group"><label>トレードリリース対象</label><select id="slapSelect" onchange="executeSimulation()"></select></div>
            </section>
            <section class="panel">
                <h2>◇目標・解析設定</h2>
                <div class="control-group"><label>解析モード</label>
                    <select id="modeSelect" onchange="updateModeUI()">
                        <option value="manual">モードA：手動設定</option>
                        <option value="strategy3" selected>モードB：戦略3 (発見追従)</option>
                    </select>
                </div>
                <div class="control-group"><label>ターゲット魚</label><select id="targetSelect" onchange="executeSimulation()"></select></div>
                <div class="control-group"><label>撒き餌 (Chum)</label><input type="checkbox" id="chumCheck" style="width:auto" onchange="executeSimulation()"> 有効</div>
                
                <div id="areaModeA" class="hidden" style="margin-top:15px; border-top:1px solid #444; padding-top:10px;">
                    <div class="control-group"><label>ルアー種類</label>
                        <select id="lureTypeSelect" onchange="updateModeAUI()">
                            <option value="none">使用しない</option>
                            <option value="ambitious">アンビシャスルアー (大型)</option>
                            <option value="modest">モデストルアー (小型)</option>
                        </select>
                    </div>
                    <div id="lureActionConfig" class="hidden">
                        <div class="control-group"><label>使用回数</label>
                            <select id="lureCountSelect" onchange="updateModeAUI()">
                                <option value="1">1回</option>
                                <option value="2">2回</option>
                                <option value="3">3回</option>
                            </select>
                        </div>
                        <div id="lureResults"></div>
                    </div>
                </div>

                <button class="btn btn-calc" onclick="executeSimulation()" style="margin-top:10px;">シミュレート実行</button>
            </section>
        </aside>
        <main>
            <div class="panel">
                <h2>Simulation Result</h2>
                <table id="resultTable">
                    <thead><tr><th>魚種</th><th>型</th><th>期待確率</th><th>待機時間</th><th>演出</th></tr></thead>
                    <tbody></tbody>
                </table>
                <div style="margin-top:20px; padding:15px; background:var(--highlight-bg); border-radius:4px">
                    <div id="yieldScore" style="font-size:1.6rem; font-weight:bold; color:var(--accent-color)">--</div>
                </div>
            </div>
        </main>
    </div>

    <div id="mgmtView" class="hidden">
        </div>
</div>

</body>
</html>