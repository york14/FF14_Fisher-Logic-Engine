<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>FLE Simulator v1.5 - Debug Enhanced</title>
    <link rel="stylesheet" href="assets/style.css">
    <style>
        /* æ¨ªæ–¹å‘é–‹é–‰ã®ãŸã‚ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ */
        .main-layout {
            display: grid;
            grid-template-columns: 320px 320px 1fr;
            transition: grid-template-columns 0.3s ease;
        }
        .main-layout.debug-collapsed {
            grid-template-columns: 320px 40px 1fr;
        }
        .debug-panel {
            overflow: hidden;
            position: relative;
        }
        .debug-panel.collapsed #debug-content {
            display: none;
        }
        .debug-panel h3 {
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
        }
        .main-layout.debug-collapsed .debug-panel h3 {
            writing-mode: vertical-rl;
            padding: 10px 0;
            border: none;
            height: 100%;
        }
    </style>
</head>
<body>
<div class="app-container">
    <header class="app-header">
        <h1>FISHERMAN LOGIC ENGINE <small>v1.5</small></h1>
        <div>
            <span id="db-status" style="color:var(--accent-red); font-size:0.8rem; margin-right:10px;">OFFLINE</span>
            <button class="btn-load" onclick="document.getElementById('json-upload').click()">Load JSON</button>
            <input type="file" id="json-upload" class="hidden" accept=".json">
        </div>
    </header>

    <main class="main-layout" id="main-layout">
        <aside class="panel">
            <h3>ğŸ“ ç’°å¢ƒãƒ»ã‚¹ã‚­ãƒ«</h3>
            <div class="input-group">
                <label>é‡£ã‚Šå ´</label>
                <select id="sel-spot"><option value="">JSONã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„</option></select>
            </div>
            <div class="input-group">
                <label>å¤©æ°—/æ™‚é–“</label>
                <select id="sel-weather" disabled></select>
            </div>
            <div class="input-group">
                <label>é¤Œ</label>
                <select id="sel-bait" disabled></select>
            </div>
            <div class="input-group">
                <label>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé­š</label>
                <select id="sel-target" disabled></select>
            </div>
            
            <hr style="border:0; border-top:1px solid var(--border); margin:15px 0;">
            
            <div class="toggle-group">
                <input type="checkbox" id="chk-chum"> <span>æ’’ãé¤Œ (Chum)</span>
            </div>
            <div class="toggle-group">
                <input type="checkbox" id="chk-catch"> <span>å…¨éƒ¨é‡£ã‚Šä¸Šã’ã‚‹</span>
            </div>
            
            <div class="input-group">
                <label>ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒªãƒªãƒ¼ã‚¹</label>
                <select id="sel-slap" disabled></select>
            </div>
            <div class="input-group">
                <label>ãƒ«ã‚¢ãƒ¼ç¨®é¡</label>
                <select id="sel-lure">
                    <option value="ãªã—">ä½¿ç”¨ã—ãªã„</option>
                    <option value="ã‚¢ãƒ³ãƒ“ã‚·ãƒ£ã‚¹ãƒ«ã‚¢ãƒ¼">ã‚¢ãƒ³ãƒ“ã‚·ãƒ£ã‚¹ãƒ«ã‚¢ãƒ¼</option>
                    <option value="ãƒ¢ãƒ‡ã‚¹ãƒˆãƒ«ã‚¢ãƒ¼">ãƒ¢ãƒ‡ã‚¹ãƒˆãƒ«ã‚¢ãƒ¼</option>
                </select>
            </div>

            <div id="lure-steps-area" class="hidden">
                <div class="input-group">
                    <label>ãƒ«ã‚¢ãƒ¼å›æ•°</label>
                    <select id="sel-lure-n">
                        <option value="1">1å›</option><option value="2">2å›</option><option value="3">3å›</option>
                    </select>
                </div>
                <div id="step-selectors"></div>
            </div>
        </aside>

        <article class="panel debug-panel" id="debug-panel">
            <h3 onclick="toggleDebugView()">
                âš™ï¸ ãƒ‡ãƒãƒƒã‚°ãƒ»è§£æãƒ“ãƒ¥ãƒ¼ <small id="debug-toggle-msg" style="font-size:0.6rem; color:var(--text-muted);">(ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹)</small>
            </h3>
            
            <div id="debug-content">
                <div class="debug-section">
                    <label>ã€GDSå®šæ•°ã€‘</label>
                    <div id="debug-constants" class="mini-table"></div>
                </div>

                <div class="debug-section">
                    <label>ã€ã‚·ãƒŠãƒªã‚ªè§£æã€‘</label>
                    <div id="debug-scenario" class="info-box"></div>
                </div>

                <div class="debug-section">
                    <label>ã€é‡ã¿ãƒ»ç¢ºç‡åˆ†é…ã®å†…è¨³ã€‘</label>
                    <div id="debug-weights" class="mini-table"></div>
                </div>

                <div class="debug-section">
                    <label>ã€æ•°å¼ã®å®Ÿè¡Œãƒˆãƒ¬ãƒ¼ã‚¹ã€‘</label>
                    <div id="debug-math" class="formula-box"></div>
                </div>
            </div>
        </article>

        <section class="panel">
            <div class="metric-card highlight">
                <span style="font-size:0.8rem;">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ’ãƒƒãƒˆæœŸå¾…æ™‚é–“</span>
                <span id="res-efficiency" class="value">0.0 <small>ç§’</small></span>
            </div>
            <h3>ğŸ“Š çµæœãƒ†ãƒ¼ãƒ–ãƒ«</h3>
            <table>
                <thead><tr><th>é­šç¨®</th><th>æ¼”å‡º</th><th>ãƒ’ãƒƒãƒˆç‡</th><th>å¾…æ©Ÿæ™‚é–“</th><th>ã‚µã‚¤ã‚¯ãƒ«æ™‚é–“</th></tr></thead>
                <tbody id="res-table-body"></tbody>
            </table>
            <div id="scenario-text" style="margin-top:10px; font-size:0.85rem; color:var(--text-muted);"></div>
            <div id="pattern-occurrence" style="margin-top:2px; font-size:0.9rem; color:var(--primary); font-weight:bold;"></div>
            <div style="margin-top:15px; font-size:0.8rem; color:var(--text-muted);">
                å¹³å‡ã‚µã‚¤ã‚¯ãƒ«æ™‚é–“: <span id="res-cycle">0.0</span>s
            </div>
        </section>
    </main>
</div>
<script src="assets/main.js"></script>
</body>
</html>