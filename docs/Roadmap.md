# 漁師論理エンジン (FLE) プロジェクト・ロードマップ

## プロジェクト目標

FF14における複雑な釣りの抽選論理を数学的にシミュレートする「漁師論理エンジン」を構築し、特定のターゲット魚を最短時間（最高効率）で獲得するための**最適スキル使用戦略**を科学的に検討・提示することを目標とする。

---

## ステップ 0：ゲームドメイン定義の確立（完了）

* **論理階層の定義**: 釣り場・環境・餌による基礎重み構造の解明。
* **物理定数の特定**: キャスト、ルアー、撒き餌等の動作硬直時間を定義。
* **ルアーアクションの一般化**: 全32パターンのシナリオ発生論理を数式化。

## ステップ 1：手動設定シミュレータの構築（完了 - v2.0）

特定の条件と特定のスキル結果を手動で設定し、その「一点」における効率を評価できるツール。

* **対話型UI**: ユーザーによる条件設定とリアルタイム計算。
* **個別シナリオ評価**: ヒット率、サイクル時間、期待待機秒数の算出。
* **詳細デバッグ**: 計算プロセスの透明化とNULLデータのエラーハンドリング。

## ステップ 2：戦略パターン評価とシナリオ合算（完了 - v2.3）

「ルアー3回（型確定で停止）」のような、複数の結果分岐を含む**戦略**そのものの優劣を評価する段階。

* **戦略モードの実装**: セットA/Bの2つの戦略を並列で設定・比較可能なUIの構築。
* **加重平均による期待値算出**: 戦略に含まれる数十通りのシナリオ発生確率を計算し、戦略全体の平均ヒット率と平均サイクル時間を導出。
* **システム最適化**: 内部データ構造のMap化による高速化、不正な参照を防ぐ堅牢化を実施。

## ステップ 3：GP消費を考慮した実践的リソース最適化（次フェーズ）

GP（ギャザラーポイント）の「有限性」を考慮し、理論値ではなく「実際に回し続けられる（持続可能な）最強の組み合わせ」を導き出す最終段階。

* **GP収支の定式化**: 各戦略における「1サイクルあたりの平均GP増減（消費または回復）」を算出する。
* **戦略の自動分類**: 全プリセットを「赤字（高効率・消費型）」と「黒字（維持型・回復型）」に分類し、データ不足により計算不可能な戦略を自動除外する。
* **オート・アナライザーの実装**:
    * 赤字戦略と黒字戦略の全組み合わせ（総当たり）について、GP収支が±0となる混合比率を計算。
    * 「GPを枯渇させずに無限に継続できる」という条件下での実質時間効率を算出。
    * 「ソロ（単体）」および「ペア（混合）」の中から、最も効率の良い運用法Top 5をランキング形式で提示する。

---

**文書履歴**:

* 2026/01/11: ステップ2完了 (v2.3)。戦略比較、Map高速化、UI刷新。
* 2026/01/11: ステップ1完了 (v2.0)。
* 2026/01/09: ロードマップ策定。