# UI仕様書(人間向け) - Fisher Logic Engine

**Version**: 1.0.0  
**作成日**: 2026-02-05  
**目的**: 「何ができるか」「どう操作するか」「何が表示されるか」を明確にする

---

## 📐 画面構成

アプリは**3つのパネル**で構成されています:

```
┌─────────────┬──────────────────┬─────────────┐
│             │                  │             │
│  左パネル   │   中央パネル     │  右パネル   │
│  (設定)     │   (結果)         │  (詳細)     │
│             │                  │             │
└─────────────┴──────────────────┴─────────────┘
```

### 左パネル: 設定
- **共通設定**: 拡張、エリア、釣り場、天気/時間、餌、ターゲット魚、外道釣り上げ有無、ターゲット確率不明かどうかの設定
- **モード切替**: 3つのモード(手動設定、戦略評価、最適化)を切り替え
- **モード固有設定**: 各モードの詳細設定

### 中央パネル: 結果
- **結果表示**: 計算結果を大きく表示
- モードによって表示内容が変わる

### 右パネル: 詳細
- **開閉可能**: 右上の「▶」ボタンで開閉
- **デバッグ情報**: 内部計算の詳細を表示

---

## 🎯 3つのモード

### モード1: 手動設定
**目的**: トレードリリース、撒き餌を設定し、ルアーシナリオを固定した場合の計算結果（適用されたテーブル、ターゲット魚の期待時間）を表示する

**設定項目**:
- トレードリリース(Surface Slap): 除外する魚を選択
- 撒き餌(Chum): 使用する/しない
- ルアーシナリオ:
  - 使用ルアー: アンビシャス/モデスト/使用しない
  - 回数: 1回/2回/3回
  - 各ステップの結果: 何もなし/発見/型確定

**表示内容**:
- **期待時間**: 「XX.X秒」を大きく表示（誤差は表示しない）
- **ヒット率**: ターゲット魚のヒット率を表示
- **GP消費(秒間)**: 1秒あたりの加重平均GP消費量を表示
- **魚種別テーブル**: 各魚のヒット率、演出、ヒット率、実効待機時間
- **設定表示1**: 釣り場、天気/時間、餌、ターゲット魚を小さく表示
- **設定表示2**: トレードリリース設定、撒き餌設定、ルアーシナリオとその発生確率、平均サイクル時間を小さく表示

### モード2: 戦略評価
**目的**: ルアーシナリオ傾向を決める2つの戦略を比較

**設定項目**:
- **セットA**と**セットB**の2つを設定:
  - 使用ルアー
  - 未発見即竿上げ: する/しない
  - 戦略プリセット: (ドロップダウンから選択)
  - トレードリリース(Surface Slap): 除外する魚を選択
  - 撒き餌: 使用する/しない

**結果表示内容**:
- **比較カード**: セットAとセットBを並べて表示
- **戦略**: 戦略名とその説明を表示
- **ターゲットの期待時間**: 大きく表示する
- **ヒット率**: ターゲット魚の加重平均ヒット率を表示
- **平均サイクル時間**: 1サイクルの加重平均時間を表示
- **GP消費(秒間)**: 1秒あたりの加重平均GP消費量を表示
- **発生確率トップ3シナリオ**

### モード3: 最適化
**目的**: （未定）

**表示内容**: 「（未定）」と表示

> [!NOTE]
> 最適化機能は現在開発を停止しています。タブは残しますが、エラー対応や参照は行いません。

---

## 🔄 操作フロー

### 1. 初期設定
1. **拡張(Expansion)**を選択 → **エリア(Area)**リストが更新される
2. **エリア**を選択 → **釣り場(Spot)**リストが更新される
3. **釣り場**を選択 → 以下が自動更新される:
   - 天気/時間リスト
   - 餌リスト
   - ターゲット魚リスト
   - トレードリリース候補

### 2. モード選択
- 左パネル上部の**タブ**をクリック:
  - 「手動設定」
  - 「戦略評価」
  - 「最適化」

### 3. 詳細設定
- 各モードの設定項目を変更
- **リアルタイム計算**: 設定を変更すると即座に結果が更新される

### 4. 結果確認
- 中央パネルで結果を確認
- 右パネル(詳細)で内部計算を確認

### 5. 結果シェア
- 左パネル下部の「📤 結果をシェア」ボタンをクリック
- シェア専用のURLが発行され、クリップボードにコピーされる(表示のみで操作はできない)

---

## 📊 表示内容の詳細

### 手動設定モードの結果表示

#### メイン表示
```
期待時間: 36.4秒
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ヒット率: 35.7%
GP消費(秒間)：1.5 GP / sec
```

#### 魚種別テーブル
| 魚種名 | ヒット率 | 実効待機時間(Min-Max) |
|:---|:---|:---|
| エレクトロベタ | 35.7% | 10.0-15.0秒 |
| サンダーレッド | 28.6% | 8.0-12.0秒 |
| ヤースラニボウフィン | 21.4% | 12.0-18.0秒 |

#### 設定表示1 (釣り場情報)
```
Spot: 満ちた玄関 / 曇り雨16-18 / ゴーストニッパー / リッチパース
```

#### 設定表示2 (戦略情報)
```
トレードリリース：なし
撒き餌：未使用
シナリオ: ルアー使用なし
発生確率: 100.00%
平均サイクル: 21.1sec
```

### 戦略評価モードの結果表示

#### 比較カード
```
┌─────────────────┬─────────────────┐
│   セットA       │   セットB       │
│ L3固定          │ Lなし           │
├─────────────────┼─────────────────┤
│ 期待時間: 42秒  │ 期待時間: 35秒  │
│ ヒット率: 45%   │ ヒット率: 38%   │
│ GP消費: 1.5/s   │ GP消費: 0.0/s   │
│ 平均サイクル:   │ 平均サイクル:   │
│   25.3秒        │   21.1秒        │
└─────────────────┴─────────────────┘
```

#### 戦略説明
```
セットA: L3固定
  状況に関わらず必ず3回使用して待機

セットB: Lなし
  ルアーアクションを一切行わずキャスト後そのまま待機
```

#### 発生確率トップ3シナリオ
**セットA**:
1. L3 (発生確率: 35.2%)
2. L3: 発見1 (発生確率: 28.1%)
3. L3: 発見2 (発生確率: 20.5%)

**セットB**:
1. 素振り (発生確率: 100.0%)

### 最適化モードの結果表示

```
（未定）
```


---

## ⚠️ エラー表示

### データ未定義
```
⚠️ データ未定義
選択した釣り場のデータが見つかりません
```
- **表示場所**: 中央パネル(結果)
- **表示条件**: 釣り場データが存在しない場合

### 不正なルアー設定
```
※発見は１度まで
```
- **表示場所**: 左パネル(ルアー設定の下)
- **表示条件**: 手動モードで「発見」を2回以上選択した場合
- **色**: 赤字

### 計算エラー
```
Error: 必要な確率データがDBに存在しません
```
- **表示場所**: 中央パネル(結果)
- **表示条件**: 確率計算に必要なデータがない場合

---

## 🎨 デザインの特徴

### 色
- **プライマリ**: 青系(ボタン、リンク)
- **アクセントA**: 緑系(セットA)
- **アクセントB**: オレンジ系(セットB)
- **エラー**: 赤系(エラーメッセージ)

### レイアウト
- **リサイズ可能**: 左右のパネルの幅を調整可能
- **開閉可能**: 右パネルは開閉可能

### フォント
- **見出し**: 太字、大きめ
- **数値**: 等幅フォント(期待時間、GP等)
- **テーブル**: 見やすい行間

---

## 📝 補足

### 共通設定の意味
- **拡張(Expansion)**: ゲームの拡張パック(例: 黄金のレガシー)
- **エリア(Area)**: 釣り場のあるエリア(例: トライヨラ)
- **釣り場(Spot)**: 具体的な釣り場(例: 満ちた玄関)
- **天気/時間(Condition)**: 釣りの条件(例: 快晴/昼)
- **餌(Bait)**: 使用する餌(例: ゴーストニッパー)
- **ターゲット魚(Target)**: 釣りたい魚(例: リッチパース)

### オプション設定
- **外道も全て釣る(Catch All)**: ターゲット以外の魚も釣り上げる（トレードリリース選択不可、釣り上げ動作時間が竿上げではなく釣り上げ動作時間になる）
- **基礎重み不明として計算(Unknown Weight)**: 結果を変数で表示　※手動設定と戦略評価でのみ有効

---

**更新履歴**:
- 2026-02-05: 初版作成
