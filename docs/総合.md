# 漁師論理エンジン構築プロジェクト：統合管理ドキュメント

## 1. プロジェクト概要
本プロジェクトは、FF14における釣りの抽選論理をシミュレートする「漁師論理エンジン」および、HTML/JSを用いたフロントエンドツールの開発を目的とする。

---

## 2. ドキュメント構成と管理状態
本プロジェクトは以下の3つの資産を柱として構成される。

| 資産名 | 形式 | ステータス | 役割 |
| :--- | :--- | :--- | :--- |
| **Game Domain Spec** | Markdown | **完成 (v3.14.0)** | 釣りに関する物理法則・抽選数式・状態遷移の正本。 |
| **Game Database (CSV)** | CSV | **調整中** | 釣り場・魚種・重みデータのマスターデータ群。 |
| **System & Tool Spec** | Markdown | **作成中** | 実装環境（HTML/JS/JSON）および UI/UX の設計書。 |

---

## 3. システム仕様（System Architecture）
フロントエンドでの完結と、将来的なデータベース連携を見据えた柔軟な構成を採用する。

- **実行環境**: HTML5 / JavaScript (ES6+)
- **データ管理**: JSON (CSV から変換し、非同期でロードする構成)
- **ホスティング**: GitHub Pages / Vercel（将来的なデプロイ先）
- **DB 拡張性**: 将来的に Supabase 等のクラウド DB へ移行可能なリレーショナル設計。

---

## 4. データベース設計指針
データは「UI 表示用（選択肢）」と「論理用（計算）」を分離して保持する。

### 4.1 釣り場定義マスタ（UI 表示用）
- **役割**: UI のプルダウン（釣り場・天気・エサ）を生成するためのマスタ。
- **構造**: `[データ種別, 釣り場, データ]` のリスト形式。

### 4.2 魚種マスタ（静的データ）
- **役割**: 魚種固有の不変属性（型、演出、釣り上げ時間）の保持。

### 4.3 重み・待機時間マスタ（動的データ）
- **役割**: 条件に応じた出現重み（$w$）と基礎待機時間（$T_{Bite}$）の定義。

---

## 5. ロジックの実装方針
詳細な計算式および状態管理については **『Game Domain Spec v3.14.0』** に完全準拠する。
- **抽選エンジン**: 重みの相対比率に基づく動的ヒット率算出。
- **時間計算**: キャスト硬直、ルアー硬直、撒き餌補正を加味した実効秒数算出。
- **状態管理**: サイクル終了時のリセットおよびトレードリリースの持続判定。

---

## 6. 開発ロードマップ
1. **フェーズ 1**: CSV を JSON 形式に統合・変換するデータパイプラインの構築。
2. **フェーズ 2**: 基本的なキャスト動作と抽選エンジンのプロトタイプ実装。
3. **フェーズ 3**: ルアーアクション（32パターン）および状態管理ロジックの実装。
4. **フェーズ 4**: メイン UI 構築と将来的な Supabase 連携の準備。

更新日：2026-01-07