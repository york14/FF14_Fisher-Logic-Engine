# トラブルシューティングログ: 待機時間計算の精度不足

## 発生日時
2026-01-27

## 事象
戦略評価結果において、ユーザーから「期待待機時間の計算が直感的な (Min+Max)/2 と合わない」「偏差が実際の分布と異なるのではないか」という指摘を受けた。
特に、ルアー拘束時間が魚の待機時間帯（Min-Max）に重複する場合、単純な平均では誤差が大きくなることが判明した。

## 原因
従来の計算式は `(Max(Min, L) + Max(Max, L)) / 2` という単純な算術平均を用いていたが、これは一様分布 $X$ と定数 $L$ の最大値 $W=\max(X, L)$ の期待値としては数学的に不正確であった。

## 対応 (v3.2.1)
確率積分を用いた厳密な期待値計算式を導入した。
$$E[W] = \frac{L(L - Min) + \frac{Max^2 - L^2}{2}}{Max - Min}$$
これにより、分布の偏りを正しく反映した期待値が得られるようになった。
ただし、表示上の「偏差（±）」については、厳密な標準偏差ではなく「範囲の半径（Range）」を便宜的に表示する仕様とした（ユーザー合意済み）。
